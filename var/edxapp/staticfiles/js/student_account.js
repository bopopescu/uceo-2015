function getParameterByName(name){var match=RegExp("[?&]"+name+"=([^&]*)").exec(window.location.search);return match?decodeURIComponent(match[1].replace(/\+/g," ")):null}!function($){"use strict";var rwd=function(){var _fn={header:"header.global-new",footer:".edx-footer-new",resultsUrl:"course-search",init:function(){_fn.$header=$(_fn.header),_fn.$footer=$(_fn.footer),_fn.$nav=_fn.$header.find("nav"),_fn.$globalNav=_fn.$nav.find(".nav-global"),_fn.add.elements(),_fn.add.classes(),_fn.eventHandlers.init()},add:{classes:function(){_fn.$header.addClass("rwd"),_fn.$footer.addClass("rwd")},elements:function(){_fn.add.burger(),_fn.add.registerLink()},burger:function(){_fn.$nav.prepend(['<a href="#" class="mobile-menu-button" aria-label="menu">','<i class="icon fa fa-bars" aria-hidden="true"></i>',"</a>"].join(""))},registerLink:function(){var $register=_fn.$nav.find(".cta-register"),$li={},$a={},count=0;$register.length>0&&(count=_fn.$globalNav.find("li").length+1,$li=$("<li/>"),$li.addClass("desktop-hide nav-global-0"+count),$a=$register.clone(),$a.removeClass(),$a.appendTo($li),_fn.$globalNav.append($li))}},eventHandlers:{init:function(){_fn.eventHandlers.click()},click:function(){_fn.$nav.on("click",".mobile-menu-button",_fn.toggleMenu)}},toggleMenu:function(event){event.preventDefault(),_fn.$globalNav.toggleClass("show")}};return{init:_fn.init}}();rwd.init()}(jQuery);var edx=edx||{};!function($,_){"use strict";_.mixin(_.str.exports()),edx.utils=edx.utils||{};var utils=function(){var _fn={validate:{msg:{email:"<li><%- gettext(\"The email address you've provided isn't formatted correctly.\") %></li>",min:'<li><%- _.sprintf( gettext("%(field)s must have at least %(count)d characters."), context ) %></li>',max:'<li><%- _.sprintf( gettext("%(field)s can only contain up to %(count)d characters."), context ) %></li>',required:'<li><%- _.sprintf( gettext("Please enter your %(field)s."), context ) %></li>',custom:"<li><%= content %></li>"},field:function(el){var $el=$(el),required=!0,min=!0,max=!0,email=!0,response={},isBlank=_fn.validate.isBlank($el);return _fn.validate.isRequired($el)?isBlank?required=!1:(min=_fn.validate.str.minlength($el),max=_fn.validate.str.maxlength($el),email=_fn.validate.email.valid($el)):isBlank||(min=_fn.validate.str.minlength($el),max=_fn.validate.str.maxlength($el),email=_fn.validate.email.valid($el)),response.isValid=required&&min&&max&&email,response.isValid||(_fn.validate.removeDefault($el),response.message=_fn.validate.getMessage($el,{required:required,min:min,max:max,email:email})),response},str:{minlength:function($el){var min=$el.attr("minlength")||0;return min<=$el.val().length},maxlength:function($el){var max=$el.attr("maxlength")||!1;return max?max>=$el.val().length:!0}},isRequired:function($el){return $el.attr("required")},isBlank:function($el){var isBlank,type=$el.attr("type");return isBlank="checkbox"===type?!$el.prop("checked"):"select"===type?$el.data("isdefault")===!0:!$el.val()},email:{regex:new RegExp(["(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*",'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"',")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,6}\\.?$)","|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$"].join(""),"i"),valid:function($el){return"email"===$el.attr("type")?_fn.validate.email.format($el.val()):!0},format:function(str){return _fn.validate.email.regex.test(str)}},getLabel:function(id){return $("label[for="+id+"]").text().split("*")[0].trim()},getMessage:function($el,tests){var tpl,label,obj,customMsg,txt=[];return _.each(tests,function(value,key){value||(label=_fn.validate.getLabel($el.attr("id")),customMsg=$el.data("errormsg-"+key)||!1,customMsg?(tpl=_fn.validate.msg.custom,obj={content:customMsg}):(tpl=_fn.validate.msg[key],obj={context:{field:label}},"min"===key?obj.context.count=parseInt($el.attr("minlength"),10):"max"===key&&(obj.context.count=parseInt($el.attr("maxlength"),10))),txt.push(_.template(tpl,obj)))}),txt.join(" ")},removeDefault:function($el){$el.setCustomValidity&&$el.setCustomValidity(" ")}}};return{validate:_fn.validate.field}}();edx.utils.validate=utils.validate}(jQuery,_,_.str,gettext),function($,undefined){var form_ext;$.form_ext=form_ext={ajax:function(options){return $.ajax(options)},handleRemote:function(element){var method=element.attr("method"),url=element.attr("action"),data=element.serializeArray(),options={type:method||"GET",data:data,dataType:"text json",success:function(data,status,xhr){element.trigger("ajax:success",[data,status,xhr])},complete:function(xhr,status){element.trigger("ajax:complete",[xhr,status])},error:function(xhr,status,error){element.trigger("ajax:error",[xhr,status,error])}};return url&&(options.url=url),form_ext.ajax(options)},CSRFProtection:function(xhr){var token=$.cookie("csrftoken");token&&xhr.setRequestHeader("X-CSRFToken",token)}},$.ajaxPrefilter(function(options,originalOptions,xhr){options.crossDomain||form_ext.CSRFProtection(xhr)}),$(document).delegate("form","submit",function(){var form=$(this),remote=form.data("remote")!==undefined;return remote?(form_ext.handleRemote(form),!1):void 0})}(jQuery),$(document).ready(function(){function catchKeyPress(object,event){var itemToFocusIndex,focusedItem=jQuery(":focus"),numberOfMenuItems=menuItems.length,focusedItemIndex=menuItems.index(focusedItem);32==event.which&&(dropdownMenuToggle.click(),event.preventDefault()),27==event.which&&(dropdownMenuToggle.click(),event.preventDefault()),(38==event.which||9==event.which&&event.shiftKey)&&(0===focusedItemIndex?menuItems.last().focus():(itemToFocusIndex=focusedItemIndex-1,menuItems.get(itemToFocusIndex).focus()),event.preventDefault()),(40==event.which||9==event.which)&&(focusedItemIndex==numberOfMenuItems-1?menuItems.first().focus():(itemToFocusIndex=focusedItemIndex+1,menuItems.get(itemToFocusIndex).focus()),event.preventDefault())}var dropdownMenuToggle=$("a.dropdown"),dropdownMenu=$("ul.dropdown-menu"),menuItems=dropdownMenu.find("a");dropdownMenuToggle.toggle(function(){dropdownMenu.addClass("expanded").find("a").first().focus(),dropdownMenuToggle.addClass("active").attr("aria-expanded","true")},function(){dropdownMenu.removeClass("expanded"),dropdownMenuToggle.removeClass("active").attr("aria-expanded","false").focus()}),dropdownMenuToggle.on("keydown",function(event){32==event.which&&(dropdownMenuToggle.click(),event.preventDefault())}),dropdownMenu.on("keydown",function(event){catchKeyPress($(this),event)})}),function($){$.fn.extend({leanModal:function(options){function close_modal(modal_id,e){$("#lean_overlay").fadeOut(200),$("iframe",modal_id).attr("src",""),$(modal_id).css({display:"none"}),"#modal_clone"==modal_id&&$(modal_id).remove(),e.preventDefault()}var defaults={top:100,overlay:.5,closeButton:null,position:"fixed"};if(0==$("#lean_overlay").length){var overlay=$("<div id='lean_overlay'></div>");$("body").append(overlay)}return options=$.extend(defaults,options),this.each(function(){var o=options;$(this).click(function(e){$(".modal").hide();var modal_id=$(this).attr("href");if($(modal_id).hasClass("video-modal")){var modal_clone=$(modal_id).clone(!0,!0);modal_clone.attr("id","modal_clone"),$(modal_id).after(modal_clone),modal_id="#modal_clone"}$("#lean_overlay").click(function(e){close_modal(modal_id,e)}),$(o.closeButton).click(function(e){close_modal(modal_id,e)}),$(o.copyEmailButton).click(function(e){close_modal(modal_id,e)});var modal_width=($(modal_id).outerHeight(),$(modal_id).outerWidth());$("#lean_overlay").css({display:"block",opacity:0}),$("#lean_overlay").fadeTo(200,o.overlay),$("iframe",modal_id).attr("src",$("iframe",modal_id).data("src")),$(modal_id).css($(modal_id).hasClass("email-modal")?{width:"80%",height:"80%",position:o.position,opacity:0,"z-index":11e3,left:"10%",top:"10%"}:{position:o.position,opacity:0,"z-index":11e3,left:"50%","margin-left":-(modal_width/2)+"px",top:o.top+"px"}),$(modal_id).show().fadeTo(200,1),$(modal_id).find(".notice").hide().html("");var notice=$(this).data("notice");void 0!==notice&&($notice=$(modal_id).find(".notice"),$notice.show().html(notice),$notice.find("a[rel*=leanModal]").leanModal({top:120,overlay:1,closeButton:".close-modal",position:"absolute"})),window.scrollTo(0,0),e.preventDefault()})})}}),$(document).ready(function($){$("a[rel*=leanModal]").each(function(){if($(this).leanModal({top:120,overlay:1,closeButton:".close-modal",position:"absolute"}),embed=$($(this).attr("href")).find("iframe"),embed.length>0&&embed.attr("src")){var sep=embed.attr("src").indexOf("?")>0?"&":"?";embed.data("src",embed.attr("src")+sep+"autoplay=1&rel=0"),embed.attr("src","")}})})}(jQuery),$(function(){if($(".filter nav").length>0){var offset=$(".filter nav").offset().top;$(window).scroll(function(){return offset<=window.pageYOffset?$(".filter nav").addClass("fixed-top"):offset>=window.pageYOffset?$(".filter nav").removeClass("fixed-top"):void 0})}}),window.isExternal=function(url){var match=url.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof match[1]&&match[1].length>0&&match[1].toLowerCase()!==location.protocol?!0:"string"==typeof match[2]&&match[2].length>0&&match[2].replace(new RegExp(":("+{"http:":80,"https:":443}[location.protocol]+")?$"),"")!==location.host?!0:!1},window.rewriteStaticLinks=function(content,from,to){function replacer(match){return match===from?to:match}if(null===from||null===to)return content;fromRe=from.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var regex=new RegExp("(https?://(www.)?[-a-zA-Z0-9@:%._+~#=]{2,256}.[a-z]{2,6}([-a-zA-Z0-9@:%_+.~#?&//=]*))?"+fromRe,"g");return content.replace(regex,replacer)};var focusedElementBeforeModal,accessible_modal=function(trigger,closeButtonId,modalId,mainPageId){var focusableElementsString="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";$(trigger).click(function(){focusedElementBeforeModal=$(trigger),$(mainPageId).attr("aria-hidden","true"),$(modalId).attr("aria-hidden","false");var focusableItems=$(modalId).find("*").filter(focusableElementsString).filter(":visible");focusableItems.attr("tabindex","2"),$(closeButtonId).attr("tabindex","1"),$(closeButtonId).focus();var last;last=0!==focusableItems.length?focusableItems.last():$(closeButtonId),last.on("keydown",function(e){var keyCode=e.keyCode||e.which;e.shiftKey||9!==keyCode||(e.preventDefault(),$(closeButtonId).focus())}),$(closeButtonId).on("keydown",function(e){var keyCode=e.keyCode||e.which;e.shiftKey&&9==keyCode&&(e.preventDefault(),last.focus())}),$("#lean_overlay, "+closeButtonId).click(function(){$(mainPageId).attr("aria-hidden","false"),$(modalId).attr("aria-hidden","true"),focusedElementBeforeModal.focus()}),$(".modal").on("keydown",function(e){var keyCode=e.keyCode||e.which;27===keyCode&&(e.preventDefault(),$(closeButtonId).click())});var initialFocus=!0;$(modalId).find("iframe").on("focus",function(){initialFocus&&($(closeButtonId).focus(),initialFocus=!1)})})};$(".nav-skip").click(function(){var href=$(this).attr("href");href&&$(href).attr("tabIndex",-1).focus()}),$(".nav-skip").keypress(function(e){if(13==e.which){var href=$(this).attr("href");href&&$(href).attr("tabIndex",-1).focus()}}),$(function(){var SRAlert;SRAlert=function(){function SRAlert(){$("body").append('<div id="reader-feedback" class="sr" style="display:none" aria-hidden="false" aria-atomic="true" aria-live="assertive"></div>'),this.el=$("#reader-feedback")}return SRAlert.prototype.clear=function(){return this.el.html(" ")},SRAlert.prototype.readElts=function(elts){var feedback="";return $.each(elts,function(idx,value){return feedback+="<p>"+$(value).html()+"</p>\n"}),this.el.html(feedback)},SRAlert.prototype.readText=function(text){return this.el.text(text)},SRAlert}(),window.SR=new SRAlert}),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),function(_){var interpolate_ntext=function(singular,plural,count,values){var text=1===count?singular:plural;return _.template(text,values,{interpolate:/\{(.+?)\}/g})};this.interpolate_ntext=interpolate_ntext;var interpolate_text=function(text,values){return _.template(text,values,{interpolate:/\{(.+?)\}/g})};this.interpolate_text=interpolate_text}.call(this,_);var edx=edx||{};!function($){"use strict";edx.student=edx.student||{},edx.student.account=edx.student.account||{},edx.student.account.EnrollmentInterface={urls:{enrollment:"/api/enrollment/v1/enrollment",trackSelection:"/course_modes/choose/"},headers:{"X-CSRFToken":$.cookie("csrftoken")},enroll:function(courseKey){var data_obj={course_details:{course_id:courseKey}},data=JSON.stringify(data_obj);$.ajax({url:this.urls.enrollment,type:"POST",contentType:"application/json; charset=utf-8",data:data,headers:this.headers,context:this}).always(function(){this.redirect(this.trackSelectionUrl(courseKey))})},trackSelectionUrl:function(courseKey){return this.urls.trackSelection+courseKey+"/"},redirect:function(url){window.location.href=url}}}(jQuery);var edx=edx||{};!function($){"use strict";edx.student=edx.student||{},edx.student.account=edx.student.account||{},edx.student.account.EmailOptInInterface={urls:{emailOptInUrl:"/user_api/v1/preferences/email_opt_in/"},headers:{"X-CSRFToken":$.cookie("csrftoken")},setPreference:function(courseKey,emailOptIn,context){return $.ajax({url:this.urls.emailOptInUrl,type:"POST",data:{course_id:courseKey,email_opt_in:emailOptIn},headers:this.headers,context:context})}}}(jQuery);var edx=edx||{};!function($){"use strict";edx.student=edx.student||{},edx.student.account=edx.student.account||{},edx.student.account.ShoppingCartInterface={urls:{viewCart:"/shoppingcart/",addCourse:"/shoppingcart/add/course/"},headers:{"X-CSRFToken":$.cookie("csrftoken")},addCourseToCart:function(courseId){$.ajax({url:this.urls.addCourse+courseId+"/",type:"POST",data:{},headers:this.headers,context:this}).always(function(){this.redirect(this.urls.viewCart)})},redirect:function(url){window.location.href=url}}}(jQuery);var edx=edx||{};!function($,Backbone){"use strict";edx.student=edx.student||{},edx.student.account=edx.student.account||{},edx.student.account.LoginModel=Backbone.Model.extend({defaults:{email:"",password:"",remember:!1},ajaxType:"",urlRoot:"",initialize:function(attributes,options){this.ajaxType=options.method,this.urlRoot=options.url},sync:function(method,model){var analytics,headers={"X-CSRFToken":$.cookie("csrftoken")},data={},courseId=$.url("?course_id");courseId&&(analytics=JSON.stringify({enroll_course_id:decodeURIComponent(courseId)})),$.extend(data,model.attributes,{analytics:analytics}),$.ajax({url:model.urlRoot,type:model.ajaxType,data:data,headers:headers,success:function(){model.trigger("sync")},error:function(error){model.trigger("error",error)}})}})}(jQuery,Backbone);var edx=edx||{};!function($,Backbone){"use strict";edx.student=edx.student||{},edx.student.account=edx.student.account||{},edx.student.account.RegisterModel=Backbone.Model.extend({defaults:{email:"",name:"",username:"",password:"",level_of_education:"",gender:"",year_of_birth:"",mailing_address:"",goals:""},ajaxType:"",urlRoot:"",initialize:function(attributes,options){this.ajaxType=options.method,this.urlRoot=options.url},sync:function(method,model){var analytics,headers={"X-CSRFToken":$.cookie("csrftoken")},data={},courseId=$.url("?course_id");courseId&&(analytics=JSON.stringify({enroll_course_id:decodeURIComponent(courseId)})),$.extend(data,model.attributes,{analytics:analytics}),$.ajax({url:model.urlRoot,type:model.ajaxType,data:data,headers:headers,success:function(){model.trigger("sync")},error:function(error){model.trigger("error",error)}})}})}(jQuery,Backbone);var edx=edx||{};!function($,Backbone){"use strict";edx.student=edx.student||{},edx.student.account=edx.student.account||{},edx.student.account.PasswordResetModel=Backbone.Model.extend({defaults:{email:""},ajaxType:"",urlRoot:"",initialize:function(attributes,options){this.ajaxType=options.method,this.urlRoot=options.url},sync:function(method,model){var headers={"X-CSRFToken":$.cookie("csrftoken")};$.ajax({url:model.urlRoot,type:model.ajaxType,data:model.attributes,headers:headers,success:function(){model.trigger("sync")},error:function(error){model.trigger("error",error)}})}})}(jQuery,Backbone);var edx=edx||{};!function($,_,Backbone){"use strict";edx.student=edx.student||{},edx.student.account=edx.student.account||{},edx.student.account.FormView=Backbone.View.extend({tagName:"form",el:"",tpl:"",fieldTpl:"#form_field-tpl",events:{},errors:[],formType:"",$form:{},fields:[],requiredStr:"*",submitButton:"",initialize:function(data){this.model=data.model,this.preRender(data),this.tpl=$(this.tpl).html(),this.fieldTpl=$(this.fieldTpl).html(),this.buildForm(data.fields),this.listenTo(this.model,"error",this.saveError)},preRender:function(data){return data},render:function(html){var fields=html||"";return $(this.el).html(_.template(this.tpl,{fields:fields})),this.postRender(),this},postRender:function(){var $container=$(this.el);this.$form=$container.find("form"),this.$errors=$container.find(".submission-error"),this.$submitButton=$container.find(this.submitButton)},buildForm:function(data){var i,html=[],len=data.length,fieldTpl=this.fieldTpl;for(this.fields=data,i=0;len>i;i++)data[i].errorMessages&&(data[i].errorMessages=this.escapeStrings(data[i].errorMessages)),html.push(_.template(fieldTpl,$.extend(data[i],{form:this.formType,requiredStr:this.requiredStr})));this.render(html.join(""))},element:{hide:function($el){$el&&$el.addClass("hidden")},scrollTop:function($el){$("html,body").animate({scrollTop:$el.offset().top},"slow")},show:function($el){$el&&$el.removeClass("hidden")}},escapeStrings:function(obj){return _.each(obj,function(val,key){obj[key]=_.escape(val)}),obj},focusFirstError:function(){var $error=this.$form.find(".error").first(),$field={},$parent={};$error.is("label")?($parent=$error.parent(".form-field"),$error=$parent.find("input")||$parent.find("select")):$field=$error,$error.focus()},forgotPassword:function(event){event.preventDefault(),this.trigger("password-help")},getFormData:function(){var i,$el,$label,obj={},$form=this.$form,elements=$form[0].elements,len=elements.length,key="",errors=[],test={};for(i=0;len>i;i++)$el=$(elements[i]),$label=$form.find("label[for="+$el.attr("id")+"]"),key=$el.attr("name")||!1,key&&(test=this.validate(elements[i]),test.isValid?(obj[key]="checkbox"===$el.attr("type")?$el.is(":checked"):$el.val(),$el.removeClass("error"),$label.removeClass("error")):(errors.push(test.message),$el.addClass("error"),$label.addClass("error")));return this.errors=_.uniq(errors),obj},saveError:function(error){this.errors=["<li>"+error.responseText+"</li>"],this.setErrors(),this.toggleDisableButton(!1)},setErrors:function(){var i,$msg=this.$errors.find(".message-copy"),html=[],errors=this.errors,len=errors.length;for(i=0;len>i;i++)html.push(errors[i]);$msg.html(html.join("")),this.element.show(this.$errors),$("html,body").animate({scrollTop:this.$errors.offset().top},"slow"),this.focusFirstError()},submitForm:function(event){var data=this.getFormData();event.preventDefault(),this.toggleDisableButton(!0),_.compact(this.errors).length?this.toggleErrorMsg(!0):(this.model.set(data),this.model.save(),this.toggleErrorMsg(!1)),this.postFormSubmission()},postFormSubmission:function(){return!0},toggleErrorMsg:function(show){show?(this.setErrors(),this.toggleDisableButton(!1)):this.element.hide(this.$errors)},toggleDisableButton:function(disabled){this.$submitButton&&this.$submitButton.attr("disabled",disabled)},validate:function($el){return edx.utils.validate($el)}})}(jQuery,_,Backbone,gettext);var edx=edx||{};!function($,_){"use strict";edx.student=edx.student||{},edx.student.account=edx.student.account||{},edx.student.account.LoginView=edx.student.account.FormView.extend({el:"#login-form",tpl:"#login-tpl",events:{"click .js-login":"submitForm","click .forgot-password":"forgotPassword","click .login-provider":"thirdPartyAuth"},formType:"login",requiredStr:"",submitButton:".js-login",preRender:function(data){this.providers=data.thirdPartyAuth.providers||[],this.currentProvider=data.thirdPartyAuth.currentProvider||"",this.platformName=data.platformName,this.resetModel=data.resetModel,this.listenTo(this.model,"sync",this.saveSuccess),this.listenTo(this.resetModel,"sync",this.resetEmail)},render:function(html){var fields=html||"";return $(this.el).html(_.template(this.tpl,{context:{fields:fields,currentProvider:this.currentProvider,providers:this.providers,platformName:this.platformName}})),this.postRender(),this},postRender:function(){this.$container=$(this.el),this.$form=this.$container.find("form"),this.$errors=this.$container.find(".submission-error"),this.$resetSuccess=this.$container.find(".js-reset-success"),this.$authError=this.$container.find(".already-authenticated-msg"),this.$submitButton=this.$container.find(this.submitButton),this.currentProvider&&this.model.save()},forgotPassword:function(event){event.preventDefault(),this.trigger("password-help"),this.element.hide(this.$resetSuccess)},postFormSubmission:function(){this.element.hide(this.$resetSuccess)},resetEmail:function(){this.element.hide(this.$errors),this.element.show(this.$resetSuccess)},thirdPartyAuth:function(event){var providerUrl=$(event.target).data("provider-url")||"";providerUrl&&(window.location.href=providerUrl)},saveSuccess:function(){this.trigger("auth-complete"),this.element.hide(this.$resetSuccess)},saveError:function(error){this.errors=["<li>"+error.responseText+"</li>"],this.setErrors(),this.element.hide(this.$resetSuccess),403===error.status&&"third-party-auth"===error.responseText&&this.currentProvider?(this.element.show(this.$authError),this.element.hide(this.$errors)):(this.element.hide(this.$authError),this.element.show(this.$errors)),this.toggleDisableButton(!1)}})}(jQuery,_,gettext);var edx=edx||{};!function($,_){"use strict";edx.student=edx.student||{},edx.student.account=edx.student.account||{},edx.student.account.RegisterView=edx.student.account.FormView.extend({el:"#register-form",tpl:"#register-tpl",events:{"click .js-register":"submitForm","click .login-provider":"thirdPartyAuth"},formType:"register",submitButton:".js-register",preRender:function(data){this.providers=data.thirdPartyAuth.providers||[],this.currentProvider=data.thirdPartyAuth.currentProvider||"",this.platformName=data.platformName,this.listenTo(this.model,"sync",this.saveSuccess)},render:function(html){var fields=html||"";return $(this.el).html(_.template(this.tpl,{context:{fields:fields,currentProvider:this.currentProvider,providers:this.providers,platformName:this.platformName}})),this.postRender(),this},thirdPartyAuth:function(event){var providerUrl=$(event.target).data("provider-url")||"";providerUrl&&(window.location.href=providerUrl)},saveSuccess:function(){this.trigger("auth-complete")}})}(jQuery,_,gettext);var edx=edx||{};!function($){"use strict";edx.student=edx.student||{},edx.student.account=edx.student.account||{},edx.student.account.PasswordResetView=edx.student.account.FormView.extend({el:"#password-reset-form",tpl:"#password_reset-tpl",events:{"click .js-reset":"submitForm"},formType:"password-reset",requiredStr:"",submitButton:".js-reset",preRender:function(){this.element.show($(this.el)),this.element.show($(this.el).parent()),this.listenTo(this.model,"sync",this.saveSuccess)},toggleErrorMsg:function(show){show?(this.setErrors(),this.toggleDisableButton(!1)):this.element.hide(this.$errors)},saveSuccess:function(){this.trigger("password-email-sent"),this.$el.empty().off(),this.stopListening()}})}(jQuery,gettext);var edx=edx||{};!function($,_,_s,Backbone){"use strict";edx.student=edx.student||{},edx.student.account=edx.student.account||{},History.Adapter.bind(window,"statechange",function(){History.getState()}),edx.student.account.AccessView=Backbone.View.extend({el:"#login-and-registration-container",tpl:"#access-tpl",events:{"click .form-toggle":"toggleForm"},subview:{login:{},register:{},passwordHelp:{}},activeForm:"",initialize:function(obj){_.mixin(_s.exports()),this.tpl=$(this.tpl).html(),this.activeForm=obj.mode||"login",this.thirdPartyAuth=obj.thirdPartyAuth||{currentProvider:null,providers:[]},this.formDescriptions={login:obj.loginFormDesc,register:obj.registrationFormDesc,reset:obj.passwordResetFormDesc},this.platformName=obj.platformName,this.resetModel=new edx.student.account.PasswordResetModel({},{method:"GET",url:"#"}),this.render()},render:function(){return $(this.el).html(_.template(this.tpl,{mode:this.activeForm})),this.postRender(),this},postRender:function(){this.loadForm(this.activeForm)},loadForm:function(type){var loadFunc=_.bind(this.load[type],this);loadFunc(this.formDescriptions[type])},load:{login:function(data){var model=new edx.student.account.LoginModel({},{method:data.method,url:data.submit_url});this.subview.login=new edx.student.account.LoginView({fields:data.fields,model:model,resetModel:this.resetModel,thirdPartyAuth:this.thirdPartyAuth,platformName:this.platformName}),this.listenTo(this.subview.login,"password-help",this.resetPassword),this.listenTo(this.subview.login,"auth-complete",this.authComplete)},reset:function(data){this.resetModel.ajaxType=data.method,this.resetModel.urlRoot=data.submit_url,this.subview.passwordHelp=new edx.student.account.PasswordResetView({fields:data.fields,model:this.resetModel}),this.listenTo(this.subview.passwordHelp,"password-email-sent",this.passwordEmailSent)},register:function(data){var model=new edx.student.account.RegisterModel({},{method:data.method,url:data.submit_url});this.subview.register=new edx.student.account.RegisterView({fields:data.fields,model:model,thirdPartyAuth:this.thirdPartyAuth,platformName:this.platformName}),this.listenTo(this.subview.register,"auth-complete",this.authComplete)}},passwordEmailSent:function(){this.element.hide($(this.el).find("#password-reset-anchor")),this.element.show($("#login-anchor")),this.element.scrollTop($("#login-anchor"))},resetPassword:function(){window.analytics.track("edx.bi.password_reset_form.viewed",{category:"user-engagement"}),this.element.hide($(this.el).find("#login-anchor")),this.loadForm("reset"),this.element.scrollTop($("#password-reset-anchor"))},toggleForm:function(e){var type=$(e.currentTarget).data("type"),$form=$("#"+type+"-form"),$anchor=$("#"+type+"-anchor"),queryParams=url("?"),queryStr=queryParams.length>0?"?"+queryParams:"";e.preventDefault(),window.analytics.track("edx.bi."+type+"_form.toggled",{category:"user-engagement"}),this.form.isLoaded($form)||this.loadForm(type),this.element.hide($(this.el).find(".submission-success")),this.element.hide($(this.el).find(".form-wrapper")),this.element.show($form),this.element.scrollTop($anchor),History.pushState(null,document.title,"/account/"+type+"/"+queryStr),analytics.page("login_and_registration",type)},authComplete:function(){var emailOptIn=edx.student.account.EmailOptInInterface,queryParams=this.queryParams();!_.isUndefined(queryParams.emailOptIn)&&queryParams.enrollmentAction?emailOptIn.setPreference(decodeURIComponent(queryParams.courseId),queryParams.emailOptIn,this).always(this.enrollment):this.enrollment()},enrollment:function(){var enrollment=edx.student.account.EnrollmentInterface,shoppingcart=edx.student.account.ShoppingCartInterface,redirectUrl="/dashboard",queryParams=this.queryParams();if("enroll"===queryParams.enrollmentAction&&queryParams.courseId)enrollment.enroll(decodeURIComponent(queryParams.courseId));else if("add_to_cart"===queryParams.enrollmentAction&&queryParams.courseId)shoppingcart.addCourseToCart(decodeURIComponent(queryParams.courseId));else{if(!_.isNull(queryParams.next)){var next=decodeURIComponent(queryParams.next);window.isExternal(next)||(redirectUrl=next)}this.redirect(redirectUrl)}},redirect:function(url){window.location.href=url},queryParams:function(){return{next:$.url("?next"),enrollmentAction:$.url("?enrollment_action"),courseId:$.url("?course_id"),emailOptIn:$.url("?email_opt_in")}},form:{isLoaded:function($form){return $form.html().length>0}},element:{hide:function($el){$el.addClass("hidden")},scrollTop:function($el){$("html,body").animate({scrollTop:$el.offset().top},"slow")},show:function($el){$el.removeClass("hidden")}}})}(jQuery,_,_.str,Backbone,gettext);var edx=edx||{};!function($){"use strict";edx.student=edx.student||{},edx.student.account=edx.student.account||{};var container=$("#login-and-registration-container");return new edx.student.account.AccessView({mode:container.data("initial-mode"),thirdPartyAuth:container.data("third-party-auth"),platformName:container.data("platform-name"),loginFormDesc:container.data("login-form-desc"),registrationFormDesc:container.data("registration-form-desc"),passwordResetFormDesc:container.data("password-reset-form-desc")})}(jQuery);