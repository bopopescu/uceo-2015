function getParameterByName(name){var match=RegExp("[?&]"+name+"=([^&]*)").exec(window.location.search);return match?decodeURIComponent(match[1].replace(/\+/g," ")):null}!function($,undefined){var form_ext;$.form_ext=form_ext={ajax:function(options){return $.ajax(options)},handleRemote:function(element){var method=element.attr("method"),url=element.attr("action"),data=element.serializeArray(),options={type:method||"GET",data:data,dataType:"text json",success:function(data,status,xhr){element.trigger("ajax:success",[data,status,xhr])},complete:function(xhr,status){element.trigger("ajax:complete",[xhr,status])},error:function(xhr,status,error){element.trigger("ajax:error",[xhr,status,error])}};return url&&(options.url=url),form_ext.ajax(options)},CSRFProtection:function(xhr){var token=$.cookie("csrftoken");token&&xhr.setRequestHeader("X-CSRFToken",token)}},$.ajaxPrefilter(function(options,originalOptions,xhr){options.crossDomain||form_ext.CSRFProtection(xhr)}),$(document).delegate("form","submit",function(){var form=$(this),remote=form.data("remote")!==undefined;return remote?(form_ext.handleRemote(form),!1):void 0})}(jQuery),$(document).ready(function(){function catchKeyPress(object,event){var itemToFocusIndex,focusedItem=jQuery(":focus"),numberOfMenuItems=menuItems.length,focusedItemIndex=menuItems.index(focusedItem);32==event.which&&(dropdownMenuToggle.click(),event.preventDefault()),27==event.which&&(dropdownMenuToggle.click(),event.preventDefault()),(38==event.which||9==event.which&&event.shiftKey)&&(0===focusedItemIndex?menuItems.last().focus():(itemToFocusIndex=focusedItemIndex-1,menuItems.get(itemToFocusIndex).focus()),event.preventDefault()),(40==event.which||9==event.which)&&(focusedItemIndex==numberOfMenuItems-1?menuItems.first().focus():(itemToFocusIndex=focusedItemIndex+1,menuItems.get(itemToFocusIndex).focus()),event.preventDefault())}var dropdownMenuToggle=$("a.dropdown"),dropdownMenu=$("ul.dropdown-menu"),menuItems=dropdownMenu.find("a");dropdownMenuToggle.toggle(function(){dropdownMenu.addClass("expanded").find("a").first().focus(),dropdownMenuToggle.addClass("active").attr("aria-expanded","true")},function(){dropdownMenu.removeClass("expanded"),dropdownMenuToggle.removeClass("active").attr("aria-expanded","false").focus()}),dropdownMenuToggle.on("keydown",function(event){32==event.which&&(dropdownMenuToggle.click(),event.preventDefault())}),dropdownMenu.on("keydown",function(event){catchKeyPress($(this),event)})}),function($){$.fn.extend({leanModal:function(options){function close_modal(modal_id,e){$("#lean_overlay").fadeOut(200),$("iframe",modal_id).attr("src",""),$(modal_id).css({display:"none"}),"#modal_clone"==modal_id&&$(modal_id).remove(),e.preventDefault()}var defaults={top:100,overlay:.5,closeButton:null,position:"fixed"};if(0==$("#lean_overlay").length){var overlay=$("<div id='lean_overlay'></div>");$("body").append(overlay)}return options=$.extend(defaults,options),this.each(function(){var o=options;$(this).click(function(e){$(".modal").hide();var modal_id=$(this).attr("href");if($(modal_id).hasClass("video-modal")){var modal_clone=$(modal_id).clone(!0,!0);modal_clone.attr("id","modal_clone"),$(modal_id).after(modal_clone),modal_id="#modal_clone"}$("#lean_overlay").click(function(e){close_modal(modal_id,e)}),$(o.closeButton).click(function(e){close_modal(modal_id,e)}),$(o.copyEmailButton).click(function(e){close_modal(modal_id,e)});var modal_width=($(modal_id).outerHeight(),$(modal_id).outerWidth());$("#lean_overlay").css({display:"block",opacity:0}),$("#lean_overlay").fadeTo(200,o.overlay),$("iframe",modal_id).attr("src",$("iframe",modal_id).data("src")),$(modal_id).css($(modal_id).hasClass("email-modal")?{width:"80%",height:"80%",position:o.position,opacity:0,"z-index":11e3,left:"10%",top:"10%"}:{position:o.position,opacity:0,"z-index":11e3,left:"50%","margin-left":-(modal_width/2)+"px",top:o.top+"px"}),$(modal_id).show().fadeTo(200,1),$(modal_id).find(".notice").hide().html("");var notice=$(this).data("notice");void 0!==notice&&($notice=$(modal_id).find(".notice"),$notice.show().html(notice),$notice.find("a[rel*=leanModal]").leanModal({top:120,overlay:1,closeButton:".close-modal",position:"absolute"})),window.scrollTo(0,0),e.preventDefault()})})}}),$(document).ready(function($){$("a[rel*=leanModal]").each(function(){if($(this).leanModal({top:120,overlay:1,closeButton:".close-modal",position:"absolute"}),embed=$($(this).attr("href")).find("iframe"),embed.length>0&&embed.attr("src")){var sep=embed.attr("src").indexOf("?")>0?"&":"?";embed.data("src",embed.attr("src")+sep+"autoplay=1&rel=0"),embed.attr("src","")}})})}(jQuery),$(function(){if($(".filter nav").length>0){var offset=$(".filter nav").offset().top;$(window).scroll(function(){return offset<=window.pageYOffset?$(".filter nav").addClass("fixed-top"):offset>=window.pageYOffset?$(".filter nav").removeClass("fixed-top"):void 0})}}),window.isExternal=function(url){var match=url.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof match[1]&&match[1].length>0&&match[1].toLowerCase()!==location.protocol?!0:"string"==typeof match[2]&&match[2].length>0&&match[2].replace(new RegExp(":("+{"http:":80,"https:":443}[location.protocol]+")?$"),"")!==location.host?!0:!1},window.rewriteStaticLinks=function(content,from,to){function replacer(match){return match===from?to:match}if(null===from||null===to)return content;fromRe=from.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var regex=new RegExp("(https?://(www.)?[-a-zA-Z0-9@:%._+~#=]{2,256}.[a-z]{2,6}([-a-zA-Z0-9@:%_+.~#?&//=]*))?"+fromRe,"g");return content.replace(regex,replacer)};var focusedElementBeforeModal,accessible_modal=function(trigger,closeButtonId,modalId,mainPageId){var focusableElementsString="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";$(trigger).click(function(){focusedElementBeforeModal=$(trigger),$(mainPageId).attr("aria-hidden","true"),$(modalId).attr("aria-hidden","false");var focusableItems=$(modalId).find("*").filter(focusableElementsString).filter(":visible");focusableItems.attr("tabindex","2"),$(closeButtonId).attr("tabindex","1"),$(closeButtonId).focus();var last;last=0!==focusableItems.length?focusableItems.last():$(closeButtonId),last.on("keydown",function(e){var keyCode=e.keyCode||e.which;e.shiftKey||9!==keyCode||(e.preventDefault(),$(closeButtonId).focus())}),$(closeButtonId).on("keydown",function(e){var keyCode=e.keyCode||e.which;e.shiftKey&&9==keyCode&&(e.preventDefault(),last.focus())}),$("#lean_overlay, "+closeButtonId).click(function(){$(mainPageId).attr("aria-hidden","false"),$(modalId).attr("aria-hidden","true"),focusedElementBeforeModal.focus()}),$(".modal").on("keydown",function(e){var keyCode=e.keyCode||e.which;27===keyCode&&(e.preventDefault(),$(closeButtonId).click())});var initialFocus=!0;$(modalId).find("iframe").on("focus",function(){initialFocus&&($(closeButtonId).focus(),initialFocus=!1)})})};$(".nav-skip").click(function(){var href=$(this).attr("href");href&&$(href).attr("tabIndex",-1).focus()}),$(".nav-skip").keypress(function(e){if(13==e.which){var href=$(this).attr("href");href&&$(href).attr("tabIndex",-1).focus()}}),$(function(){var SRAlert;SRAlert=function(){function SRAlert(){$("body").append('<div id="reader-feedback" class="sr" style="display:none" aria-hidden="false" aria-atomic="true" aria-live="assertive"></div>'),this.el=$("#reader-feedback")}return SRAlert.prototype.clear=function(){return this.el.html(" ")},SRAlert.prototype.readElts=function(elts){var feedback="";return $.each(elts,function(idx,value){return feedback+="<p>"+$(value).html()+"</p>\n"}),this.el.html(feedback)},SRAlert.prototype.readText=function(text){return this.el.text(text)},SRAlert}(),window.SR=new SRAlert}),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),function(_){var interpolate_ntext=function(singular,plural,count,values){var text=1===count?singular:plural;return _.template(text,values,{interpolate:/\{(.+?)\}/g})};this.interpolate_ntext=interpolate_ntext;var interpolate_text=function(text,values){return _.template(text,values,{interpolate:/\{(.+?)\}/g})};this.interpolate_text=interpolate_text}.call(this,_);var edx=edx||{};!function($,_,Backbone){"use strict";edx.verify_student=edx.verify_student||{},edx.verify_student.VerificationModel=Backbone.Model.extend({defaults:{fullName:null,faceImage:"",identificationImage:""},sync:function(method,model){var headers={"X-CSRFToken":$.cookie("csrftoken")},data={face_image:model.get("faceImage"),photo_id_image:model.get("identificationImage")};_.isEmpty(model.get("fullName"))||(data.full_name=model.get("fullName"),window.analytics.track("edx.bi.user.full_name.changed",{category:"verification"})),$.ajax({url:"/verify_student/submit-photos/",type:"POST",data:data,headers:headers,success:function(){model.trigger("sync")},error:function(error){model.trigger("error",error)}})}})}(jQuery,_,Backbone);var edx=edx||{};!function($,_,Backbone){"use strict";edx.verify_student=edx.verify_student||{},edx.verify_student.ErrorView=Backbone.View.extend({initialize:function(obj){var ErrorModel=Backbone.Model.extend({});this.model=obj.model||new ErrorModel({errorTitle:"",errorMsg:"",shown:!1}),this.listenToOnce(this.model,"change",this.render)},render:function(){var renderedHtml=_.template($("#error-tpl").html(),{errorTitle:this.model.get("errorTitle"),errorMsg:this.model.get("errorMsg")});$(this.el).html(renderedHtml),this.model.get("shown")?($(this.el).show(),$("html, body").animate({scrollTop:0})):$(this.el).hide()}})}($,_,Backbone);var edx=edx||{};!function($,_,Backbone,gettext){"use strict";edx.verify_student=edx.verify_student||{},edx.verify_student.WebcamPhotoView=Backbone.View.extend({template:"#webcam_photo-tpl",backends:[{name:"html5",initialize:function(obj){this.URL=window.URL||window.webkitURL,this.video=obj.video||"",this.canvas=obj.canvas||"",this.stream=null,this.getUserMediaFunc()({video:!0,fake:"localhost"===window.location.hostname},_.bind(this.getUserMediaCallback,this),_.bind(this.handleVideoFailure,this))},isSupported:function(){return void 0!==this.getUserMediaFunc()},snapshot:function(){var video;return this.stream?(video=this.getVideo(),this.getCanvas().getContext("2d").drawImage(video,0,0),video.pause(),!0):!1},getImageData:function(){return this.getCanvas().toDataURL("image/png")},reset:function(){this.getVideo().play()},getUserMediaFunc:function(){var userMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return userMedia?_.bind(userMedia,navigator):void 0},getUserMediaCallback:function(stream){var video=this.getVideo();this.stream=stream,video.src=this.URL.createObjectURL(stream),video.play()},getVideo:function(){return $(this.video).first()[0]},getCanvas:function(){return $(this.canvas).first()[0]},handleVideoFailure:function(){this.trigger("error",gettext("Video Capture Error"),gettext("Please verify that your webcam is connected and that you have allowed your browser to access it."))}},{name:"flash",initialize:function(obj){this.wrapper=obj.wrapper||"",this.imageData="",$(this.wrapper).html(this.flashObjectTag()),this.checkCameraSupported()},isSupported:function(){try{var flashObj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(flashObj)return!0}catch(ex){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1},snapshot:function(){var flashObj=this.getFlashObject();return flashObj.cameraAuthorized()?(this.imageData=flashObj.snap(),!0):!1},reset:function(){this.getFlashObject().reset()},getImageData:function(){return this.imageData},flashObjectTag:function(){return'<object type="application/x-shockwave-flash" id="flash_video" name="flash_video" data="/static/js/verify_student/CameraCapture.swf" width="500" height="375"><param name="quality" value="high"><param name="allowscriptaccess" value="sameDomain"></object>'},getFlashObject:function(){return $("#flash_video")[0]},checkCameraSupported:function(){var flashObj=this.getFlashObject(),isLoaded=!1,hasCamera=!1;isLoaded=flashObj&&flashObj.hasOwnProperty("percentLoaded")&&100===flashObj.percentLoaded(),hasCamera=flashObj&&flashObj.hasOwnProperty("hasCamera")&&flashObj.hasCamera(),isLoaded&&!hasCamera?this.trigger("error",gettext("No Webcam Detected"),gettext("You don't seem to have a webcam connected.")+"  "+gettext("Double-check that your webcam is connected and working to continue.")):isLoaded||hasCamera||setTimeout(_.bind(this.checkCameraSupported,this),50)}}],initialize:function(obj){this.submitButton=obj.submitButton||"",this.modelAttribute=obj.modelAttribute||"",this.errorModel=obj.errorModel||null,this.backend=_.find(obj.backends||this.backends,function(backend){return backend.isSupported()}),this.backend?(_.extend(this.backend,Backbone.Events),this.listenTo(this.backend,"error",this.handleError)):this.handleError(gettext("Flash Not Detected"),gettext("You don't seem to have Flash installed.")+"  "+_.sprintf(gettext("%(a_start)s Get Flash %(a_end)s to continue your enrollment."),{a_start:'<a rel="external" href="http://get.adobe.com/flashplayer/">',a_end:"</a>"}))},render:function(){var renderedHtml;return this.setSubmitButtonEnabled(!1),renderedHtml=_.template($(this.template).html(),{}),$(this.el).html(renderedHtml),this.backend&&(this.backend.initialize({wrapper:"#camera",video:"#photo_id_video",canvas:"#photo_id_canvas"}),$("#webcam_reset_button",this.el).on("click",_.bind(this.reset,this)),$("#webcam_capture_button",this.el).on("click",_.bind(this.capture,this)),$("#webcam_capture_button",this.el).removeClass("is-hidden")),this},reset:function(){this.setSubmitButtonEnabled(!1),this.backend.reset(),this.model.set(this.modelAttribute,""),$("#webcam_reset_button",this.el).addClass("is-hidden"),$("#webcam_capture_button",this.el).removeClass("is-hidden")},capture:function(){var success=this.backend.snapshot();success&&(this.trigger("imageCaptured"),$("#webcam_capture_button",this.el).addClass("is-hidden"),$("#webcam_reset_button",this.el).removeClass("is-hidden"),this.model.set(this.modelAttribute,this.backend.getImageData()),this.setSubmitButtonEnabled(!0))},handleError:function(errorTitle,errorMsg){$("#webcam_capture_button",this.el).addClass("is-hidden"),$("#webcam_reset_button",this.el).addClass("is-hidden"),this.errorModel&&this.errorModel.set({errorTitle:errorTitle,errorMsg:errorMsg,shown:!0})},setSubmitButtonEnabled:function(isEnabled){$(this.submitButton).toggleClass("is-disabled",!isEnabled).prop("disabled",!isEnabled).attr("aria-disabled",!isEnabled)}})}(jQuery,_,Backbone,gettext);var edx=edx||{};!function($,_,_s,Backbone,gettext){"use strict";edx.verify_student=edx.verify_student||{},edx.verify_student.StepView=Backbone.View.extend({initialize:function(obj){_.extend(this,obj),_.mixin(_s.exports())},render:function(){var templateHtml=$("#"+this.templateName+"-tpl").html();return this.updateContext(this.templateContext()).done(function(templateContext){$(this.el).html(_.template(templateHtml,templateContext)),this.postRender()}).fail(_.bind(this.handleError,this)),this},handleError:function(errorTitle,errorMsg){this.errorModel.set({errorTitle:errorTitle||gettext("Error"),errorMsg:errorMsg||gettext("An error has occurred. Please try reloading the page."),shown:!0})},templateContext:function(){var context={nextStepTitle:this.nextStepTitle};return _.extend(context,this.defaultContext(),this.stepData)},defaultContext:function(){return{}},updateContext:function(templateContext){var view=this;return $.Deferred(function(defer){defer.resolveWith(view,[templateContext])}).promise()},postRender:function(){},nextStep:function(){this.trigger("next-step")},goToStep:function(stepName){this.trigger("go-to-step",stepName)}})}(jQuery,_,_.str,Backbone,gettext);var edx=edx||{};!function(){"use strict";edx.verify_student=edx.verify_student||{},edx.verify_student.IntroStepView=edx.verify_student.StepView.extend({defaultContext:function(){return{introTitle:"",introMsg:"",isActive:!1,hasPaid:!1,platformName:"",requirements:{}}},postRender:function(){window.analytics.page("verification",this.templateName)}})}(jQuery);var edx=edx||{};!function($,_,gettext){"use strict";edx.verify_student=edx.verify_student||{},edx.verify_student.MakePaymentStepView=edx.verify_student.StepView.extend({defaultContext:function(){return{isActive:!0,suggestedPrices:[],minPrice:0,currency:"usd",upgrade:!1,verificationDeadline:"",courseName:"",requirements:{},hasVisibleReqs:!1,platformName:""}},postRender:function(){var templateContext=this.templateContext(),hasVisibleReqs=_.some(templateContext.requirements,function(isVisible){return isVisible});window.analytics.page("payment",this.templateName),this.setPaymentEnabled(!1),templateContext.contributionAmount&&this.selectPaymentAmount(templateContext.contributionAmount),!templateContext.upgrade&&templateContext.contributionAmount&&hasVisibleReqs||$(".wrapper-task").removeClass("hidden").removeAttr("aria-hidden"),templateContext.suggestedPrices.length>0?$('input[name="contribution"]').on("click",_.bind(this.setPaymentEnabled,this)):this.setPaymentEnabled(!0),$("#pay_button").on("click",_.bind(this.createOrder,this))},setPaymentEnabled:function(isEnabled){_.isUndefined(isEnabled)&&(isEnabled=!0),$("#pay_button").toggleClass("is-disabled",!isEnabled).prop("disabled",!isEnabled).attr("aria-disabled",!isEnabled)},createOrder:function(){var paymentAmount=this.getPaymentAmount(),postData={contribution:paymentAmount,course_id:this.stepData.courseKey};this.setPaymentEnabled(!1),$.ajax({url:"/verify_student/create_order/",type:"POST",headers:{"X-CSRFToken":$.cookie("csrftoken")},data:postData,context:this,success:this.handleCreateOrderResponse,error:this.handleCreateOrderError})},handleCreateOrderResponse:function(paymentParams){var form=$("#payment-processor-form");$("input",form).remove(),form.attr("action",this.stepData.purchaseEndpoint),form.attr("method","POST"),_.each(paymentParams,function(value,key){$("<input>").attr({type:"hidden",name:key,value:value}).appendTo(form)}),window.analytics.page("payment","payment_processor_step"),this.submitForm(form)},handleCreateOrderError:function(xhr){var errorMsg=gettext("An error has occurred. Please try again.");400===xhr.status&&(errorMsg=xhr.responseText),this.errorModel.set({errorTitle:gettext("Could not submit order"),errorMsg:errorMsg,shown:!0}),this.setPaymentEnabled(!0)},getPaymentAmount:function(){var contributionInput=$('input[name="contribution"]:checked',this.el),amount=null;return amount="contribution-other"===contributionInput.attr("id")?$('input[name="contribution-other-amt"]',this.el).val():contributionInput.val(),amount||(amount=this.templateContext().minPrice),amount},selectPaymentAmount:function(amount){var foundPrice,sel,amountFloat=parseFloat(amount);return foundPrice=_.find(this.stepData.suggestedPrices,function(price){return parseFloat(price)===amountFloat}),foundPrice?(sel=_.sprintf('input[name="contribution"][value="%s"]',foundPrice),$(sel).prop("checked",!0)):($("#contribution-other-amt",this.el).val(amount),$("#contribution-other",this.el).prop("checked",!0)),this.setPaymentEnabled(),amount},submitForm:function(form){form.submit()}})}(jQuery,_,gettext);var edx=edx||{};!function($,_,gettext){"use strict";edx.verify_student=edx.verify_student||{},edx.verify_student.PaymentConfirmationStepView=edx.verify_student.StepView.extend({defaultContext:function(){return{courseKey:"",courseName:"",courseStartDate:"",coursewareUrl:"",platformName:"",requirements:[]}},updateContext:function(templateContext){var view=this;return $.Deferred(function(defer){var paymentOrderNum=$.url("?payment-order-num");paymentOrderNum?view.getReceiptData(paymentOrderNum).done(function(data){_.extend(templateContext,{receipt:this.receiptContext(data)}),defer.resolveWith(view,[templateContext])}).fail(function(){defer.rejectWith(this,[gettext("Error"),gettext("Could not retrieve payment information")])}):(_.extend(templateContext,{receipt:null}),defer.resolveWith(view,[templateContext]))}).promise()},postRender:function(){var $verifyNowButton=$("#verify_now_button"),$verifyLaterButton=$("#verify_later_button");window.analytics.page("payment",this.templateName),window.analytics.trackLink($verifyNowButton,"edx.bi.user.verification.immediate",{category:"verification"}),window.analytics.trackLink($verifyLaterButton,"edx.bi.user.verification.deferred",{category:"verification"})},getReceiptData:function(paymentOrderNum){return $.ajax({url:_.sprintf("/shoppingcart/receipt/%s/",paymentOrderNum),type:"GET",dataType:"json",context:this})},receiptContext:function(data){var receiptContext,view=this;return receiptContext={orderNum:data.orderNum,currency:data.currency,purchasedDatetime:data.purchase_datetime,totalCost:view.formatMoney(data.total_cost),isRefunded:"refunded"===data.status,billedTo:{firstName:data.billed_to.first_name,lastName:data.billed_to.last_name,city:data.billed_to.city,state:data.billed_to.state,postalCode:data.billed_to.postal_code,country:data.billed_to.country},items:[]},receiptContext.items=_.map(data.items,function(item){return{lineDescription:item.line_desc,cost:view.formatMoney(item.line_cost)}}),receiptContext},formatMoney:function(moneyStr){return Number(moneyStr).toFixed(2)}})}(jQuery,_,gettext);var edx=edx||{};!function($){"use strict";edx.verify_student=edx.verify_student||{},edx.verify_student.FacePhotoStepView=edx.verify_student.StepView.extend({defaultContext:function(){return{platformName:""}},postRender:function(){var webcam=new edx.verify_student.WebcamPhotoView({el:$("#facecam"),model:this.model,modelAttribute:"faceImage",submitButton:"#next_step_button",errorModel:this.errorModel}).render();window.analytics.page("verification",this.templateName),this.listenTo(webcam,"imageCaptured",function(){window.analytics.track("edx.bi.user.face_image.captured",{category:"verification"})}),$("#next_step_button").on("click",_.bind(this.nextStep,this))}})}(jQuery);var edx=edx||{};!function($){"use strict";edx.verify_student=edx.verify_student||{},edx.verify_student.IDPhotoStepView=edx.verify_student.StepView.extend({defaultContext:function(){return{platformName:""}},postRender:function(){var webcam=new edx.verify_student.WebcamPhotoView({el:$("#idcam"),model:this.model,modelAttribute:"identificationImage",submitButton:"#next_step_button",errorModel:this.errorModel}).render();window.analytics.page("verification",this.templateName),this.listenTo(webcam,"imageCaptured",function(){window.analytics.track("edx.bi.user.identification_image.captured",{category:"verification"})}),$("#next_step_button").on("click",_.bind(this.nextStep,this))}})}(jQuery);var edx=edx||{};!function($,gettext){"use strict";edx.verify_student=edx.verify_student||{},edx.verify_student.ReviewPhotosStepView=edx.verify_student.StepView.extend({defaultContext:function(){return{platformName:"",fullName:""}},postRender:function(){$("#face_image")[0].src=this.model.get("faceImage"),$("#photo_id_image")[0].src=this.model.get("identificationImage"),$(".expandable-area").slideUp(),$(".is-expandable").addClass("is-ready"),$(".is-expandable .title-expand").on("click",this.expandCallback),$("#retake_photos_button").on("click",_.bind(this.retakePhotos,this)),$("#next_step_button").on("click",_.bind(this.submitPhotos,this)),window.analytics.page("verification",this.templateName)},retakePhotos:function(){window.analytics.track("edx.bi.user.images.retaken",{category:"verification"}),this.goToStep("face-photo-step")},submitPhotos:function(){var fullName=$("#new-name").val();this.setSubmitButtonEnabled(!1),this.listenToOnce(this.model,"sync",_.bind(this.nextStep,this)),this.listenToOnce(this.model,"error",_.bind(this.handleSubmissionError,this)),fullName&&this.model.set("fullName",fullName),this.model.save()},handleSubmissionError:function(xhr){var errorMsg=gettext("An error has occurred. Please try again later.");this.setSubmitButtonEnabled(!0),400===xhr.status&&(errorMsg=xhr.responseText),this.errorModel.set({errorTitle:gettext("Could not submit photos"),errorMsg:errorMsg,shown:!0})},expandCallback:function(event){var $link=$(this),$title=$link.closest(".help-tip"),expanded=$title.hasClass("is-expanded");event.preventDefault(),$link.attr("aria-expanded",!expanded),$title.toggleClass("is-expanded").find(".expandable-area").slideToggle()},setSubmitButtonEnabled:function(isEnabled){$("#next_step_button").toggleClass("is-disabled",!isEnabled).prop("disabled",!isEnabled).attr("aria-disabled",!isEnabled)}})}(jQuery,gettext);var edx=edx||{};!function(){"use strict";edx.verify_student=edx.verify_student||{},edx.verify_student.EnrollmentConfirmationStepView=edx.verify_student.StepView.extend({postRender:function(){window.analytics.page("verification",this.templateName)},defaultContext:function(){return{courseName:"",courseStartDate:"",coursewareUrl:"",platformName:""}}})}(jQuery);var edx=edx||{};!function($,_,Backbone){"use strict";edx.verify_student=edx.verify_student||{},edx.verify_student.PayAndVerifyView=Backbone.View.extend({el:"#pay-and-verify-container",subviews:{},VERIFICATION_VIEW_NAMES:["face-photo-step","id-photo-step","review-photos-step"],initialize:function(obj){this.errorModel=obj.errorModel||null,this.displaySteps=obj.displaySteps||[],this.initializeStepViews(obj.stepInfo||{}),this.currentStepIndex=_.indexOf(_.pluck(this.displaySteps,"name"),obj.currentStep)},initializeStepViews:function(stepInfo){var i,stepName,stepData,subview,subviewConfig,nextStepTitle,subviewConstructors,verificationModel;for(subviewConstructors={"intro-step":edx.verify_student.IntroStepView,"make-payment-step":edx.verify_student.MakePaymentStepView,"payment-confirmation-step":edx.verify_student.PaymentConfirmationStepView,"face-photo-step":edx.verify_student.FacePhotoStepView,"id-photo-step":edx.verify_student.IDPhotoStepView,"review-photos-step":edx.verify_student.ReviewPhotosStepView,"enrollment-confirmation-step":edx.verify_student.EnrollmentConfirmationStepView},verificationModel=new edx.verify_student.VerificationModel,i=0;i<this.displaySteps.length;i++)stepName=this.displaySteps[i].name,subview=null,nextStepTitle=i<this.displaySteps.length-1?this.displaySteps[i+1].title:"",subviewConstructors.hasOwnProperty(stepName)&&(stepData={},stepInfo.hasOwnProperty(stepName)&&_.extend(stepData,stepInfo[stepName]),subviewConfig={errorModel:this.errorModel,templateName:this.displaySteps[i].templateName,nextStepTitle:nextStepTitle,stepData:stepData},this.VERIFICATION_VIEW_NAMES.indexOf(stepName)>=0&&_.extend(subviewConfig,{model:verificationModel}),this.subviews[stepName]=new subviewConstructors[stepName](subviewConfig),this.listenTo(this.subviews[stepName],"next-step",this.nextStep),this.listenTo(this.subviews[stepName],"go-to-step",this.goToStep))},render:function(){return this.renderCurrentStep(),this},renderCurrentStep:function(){var stepName,stepView,stepEl;stepEl=$("#current-step-container"),stepEl.length||(stepEl=$('<div id="current-step-container"></div>').appendTo(this.el)),stepName=this.displaySteps[this.currentStepIndex].name,stepView=this.subviews[stepName],stepView.el=stepEl,stepView.render()},nextStep:function(){this.currentStepIndex=Math.min(this.currentStepIndex+1,this.displaySteps.length-1),this.render()},goToStep:function(stepName){var stepIndex=_.indexOf(_.pluck(this.displaySteps,"name"),stepName);stepIndex>=0&&(this.currentStepIndex=stepIndex),this.render()}})}(jQuery,_,Backbone,gettext);var edx=edx||{};!function($,_){"use strict";var errorView,el=$("#pay-and-verify-container");return edx.verify_student=edx.verify_student||{},errorView=new edx.verify_student.ErrorView({el:$("#error-container")}),new edx.verify_student.PayAndVerifyView({errorModel:errorView.model,displaySteps:el.data("display-steps"),currentStep:el.data("current-step"),stepInfo:{"intro-step":{courseName:el.data("course-name"),hasPaid:"verify-now"===el.data("msg-key")||"verify-later"===el.data("msg-key"),isActive:el.data("is-active"),platformName:el.data("platform-name"),requirements:el.data("requirements")},"make-payment-step":{isActive:el.data("is-active"),requirements:el.data("requirements"),courseKey:el.data("course-key"),courseName:el.data("course-name"),hasVisibleReqs:_.some(el.data("requirements"),function(isVisible){return isVisible}),upgrade:"upgrade"===el.data("msg-key"),minPrice:el.data("course-mode-min-price"),contributionAmount:el.data("contribution-amount"),suggestedPrices:_.filter(el.data("course-mode-suggested-prices").toString().split(","),function(price){return Boolean(price)}),currency:el.data("course-mode-currency"),purchaseEndpoint:el.data("purchase-endpoint"),verificationDeadline:el.data("verification-deadline")},"payment-confirmation-step":{courseKey:el.data("course-key"),courseName:el.data("course-name"),courseStartDate:el.data("course-start-date"),coursewareUrl:el.data("courseware-url"),platformName:el.data("platform-name"),requirements:el.data("requirements")},"face-photo-step":{platformName:el.data("platform-name")},"id-photo-step":{platformName:el.data("platform-name")},"review-photos-step":{fullName:el.data("full-name"),platformName:el.data("platform-name")},"enrollment-confirmation-step":{courseName:el.data("course-name"),courseStartDate:el.data("course-start-date"),coursewareUrl:el.data("courseware-url"),platformName:el.data("platform-name")}}}).render()}(jQuery,_);